# NobleVine-Wellness
Online Herbs/Consultation 
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Noble Vine Herbal Wellness • Jeremiah 2:21</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">
        <span class="brand-mark">Noble Vine</span>
        <span class="brand-sub">Herbal Wellness</span>
      </a>
      <nav class="nav">
        <a class="active" href="index.html">The Flow</a>
        <a href="formulas.html">Formulas & Protocol Builder</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-top">
        <div>
          <h1>Consumption → Absorption → Elimination</h1>
          <p class="lead">
            The body was designed with order. When we honor the flow, the body can receive, build, and release.
            When we disrupt the flow—especially with the wrong inputs—backups begin, and imbalance can take root.
          </p>
        </div>
        <div class="verse-card">
          <div class="verse-label">Slogan</div>
          <div class="verse-text">Jeremiah 2:21</div>
          <div class="verse-sub">“A noble vine…”</div>
        </div>
      </div>

      <div class="pill-row">
        <span class="pill">Consumption</span>
        <span class="pill">Absorption</span>
        <span class="pill">Elimination</span>
      </div>

      <div class="callout subtle">
        <p><strong>Spiritual/Wholistic lens:</strong> many patterns we call “disease” begin as disorder—wrong inputs, weak receiving, and delayed release.</p>
      </div>
    </section>

    <section class="grid two">
      <article class="card">
        <h2>1) Consumption</h2>
        <p>
          What we consume becomes instruction. Food can bring peace to digestion—or provoke irritation,
          fermentation, mucus, sluggish bile, and inflammation.
        </p>
        <ul>
          <li><strong>Clean inputs</strong> digest with less burden and nourish more deeply.</li>
          <li><strong>Wrong inputs</strong> may overstimulate cravings while starving cells.</li>
        </ul>
      </article>

      <article class="card">
        <h2>2) Absorption</h2>
        <p>
          Absorption is the receiving. When the gut environment is irritated, congested, or imbalanced,
          nutrients may pass through without being taken up.
        </p>
        <ul>
          <li><strong>Low absorption</strong> can create fatigue and “false hunger.”</li>
          <li><strong>The body compensates</strong> by storing—because it feels unsafe.</li>
        </ul>
      </article>
    </section>

    <section class="card">
      <h2>3) Elimination</h2>
      <p>
        Elimination is release—bowels, urine, sweat, breath, and skin renewal. When release is delayed,
        the body may store what it cannot move.
      </p>
      <div class="callout">
        <p><strong>Core idea:</strong> wrong consumption → weak absorption → protective storage → slowed elimination → symptoms → disease manifestation.</p>
      </div>
    </section>

    <section class="card">
      <h2>The pattern that creates “backup”</h2>

      <div class="flow">
        <div class="flow-step">
          <h3>Wrong foods / wrong timing</h3>
          <p>Digestive stress, irritation, cravings, heaviness, mucus, stagnation.</p>
        </div>
        <div class="flow-arrow">↓</div>
        <div class="flow-step">
          <h3>Little to no absorption</h3>
          <p>The body feels under-fed → signals intensify → more craving + stress.</p>
        </div>
        <div class="flow-arrow">↓</div>
        <div class="flow-step">
          <h3>Storage mode activates</h3>
          <p>To preserve energy and protect tissues, the body stores what it can’t process.</p>
        </div>
        <div class="flow-arrow">↓</div>
        <div class="flow-step">
          <h3>Elimination slows</h3>
          <p>Waste and excess are not clearing efficiently → internal pressure rises.</p>
        </div>
        <div class="flow-arrow">↓</div>
        <div class="flow-step">
          <h3>Symptoms → disease manifestation</h3>
          <p>Chronic burden may express as pain, inflammation, hormonal imbalance, and illness.</p>
        </div>
      </div>
    </section>

    <section class="grid two">
      <article class="card">
        <h2>Restoring the flow</h2>
        <ul>
          <li>Remove irritants and reduce burden foods</li>
          <li>Support bile + bowel rhythm (daily release)</li>
          <li>Rebuild the gut environment (better receiving)</li>
          <li>Hydrate, move, and breathe (circulation + lymph)</li>
        </ul>
        <p class="note">
          Visit the <a href="formulas.html">Formulas & Protocol Builder</a> page to explore capsule categories and tea schedules.
        </p>
      </article>

      <article class="card">
        <h2>Important disclaimer</h2>
        <p class="fineprint">
          Educational content only — not medical advice. Herbs and supplements can interact with medications and health conditions
          (including diabetes, blood pressure, blood thinners, pregnancy/nursing, surgery, and chronic illness).
          Consult a qualified healthcare professional before using herbs or changing any treatment plan.
        </p>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-inner">
      <small>© <span id="year"></span> Noble Vine Herbal Wellness • Jeremiah 2:21</small>
      <small><a href="formulas.html">Formulas & Protocol Builder</a></small>
    </div>
  </footer>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formulas & Protocol Builder • Noble Vine Herbal Wellness</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="index.html">
        <span class="brand-mark">Noble Vine</span>
        <span class="brand-sub">Herbal Wellness</span>
      </a>
      <nav class="nav">
        <a href="index.html">The Flow</a>
        <a class="active" href="formulas.html">Formulas & Protocol Builder</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero compact">
      <div class="hero-top">
        <div>
          <h1>Formulas & Protocol Builder</h1>
          <p class="lead">
            Explore capsule formula categories and build a simple daily tea rhythm:
            <strong>Morning • Noontime • Evening</strong>.
          </p>
        </div>
        <div class="verse-card">
          <div class="verse-label">Slogan</div>
          <div class="verse-text">Jeremiah 2:21</div>
          <div class="verse-sub">Noble Vine Herbal Wellness</div>
        </div>
      </div>

      <div class="search-row">
        <input id="search" class="search" type="search" placeholder="Search (e.g., liver, bile, mucus, endocrine)..." />
        <button id="expandAll" class="btn" type="button">Expand all</button>
        <button id="collapseAll" class="btn btn-ghost" type="button">Collapse</button>
      </div>

      <p class="fineprint">
        Educational only. Herbs may interact with medications/conditions. Start low, go slow, and consult a qualified professional.
      </p>
    </section>

    <!-- Protocol Builder -->
    <section class="card">
      <h2>Protocol Builder</h2>
      <p class="note">
        Choose a focus for each time of day. You’ll get a suggested tea blend and a simple “how to use” format.
        This is a foundation you can customize with consultation and blood panel review.
      </p>

      <div class="protocol-grid">
        <div class="protocol-col">
          <div class="protocol-label">Morning Tea</div>
          <select id="selMorning" class="select">
            <option value="blood_cleanse">Blood Cleanse</option>
            <option value="liver_bile">Liver/Bile Support</option>
            <option value="kidneys">Kidneys & Water Balance</option>
            <option value="mucus">Mucus Break-Up</option>
            <option value="endocrine">Endocrine/Hormone Balance</option>
            <option value="adrenal">Adrenal & Nervous System</option>
          </select>
          <div id="outMorning" class="protocol-out"></div>
        </div>

        <div class="protocol-col">
          <div class="protocol-label">Noontime Tea</div>
          <select id="selNoon" class="select">
            <option value="lymph">Lymph & Circulation</option>
            <option value="parasites">Parasites Support</option>
            <option value="digestion">Digestion & Absorption</option>
            <option value="mucus">Mucus Break-Up</option>
            <option value="kidneys">Kidneys & Water Balance</option>
            <option value="blood_cleanse">Blood Cleanse</option>
          </select>
          <div id="outNoon" class="protocol-out"></div>
        </div>

        <div class="protocol-col">
          <div class="protocol-label">Evening Tea</div>
          <select id="selEvening" class="select">
            <option value="adrenal">Adrenal & Nervous System</option>
            <option value="bile_constipation">Bile + Constipation Support</option>
            <option value="uterine">Uterine Tone / Blood Cleanse</option>
            <option value="nausea">Nausea/Calm Stomach</option>
            <option value="mucosa">Soothing Mucosa Support</option>
          </select>
          <div id="outEvening" class="protocol-out"></div>
        </div>
      </div>

      <div class="protocol-actions">
        <button id="btnBuild" class="btn" type="button">Build My Daily Protocol</button>
        <button id="btnReset" class="btn btn-ghost" type="button">Reset</button>
      </div>

      <div id="protocolResult" class="protocol-result" aria-live="polite"></div>

      <div class="callout subtle">
        <p>
          <strong>Optional add-ons:</strong> Diet consultation to pair with tea schedule • Blood panels reading for specific tailoring.
        </p>
      </div>
    </section>

    <!-- Capsule formulas -->
    <section class="card">
      <h2>Capsulated Herb Formulas</h2>
      <p class="note">
        Expand a category to see the intended purpose and example herb themes (not a prescription).
      </p>

      <div class="accordion">

        <details class="acc-item" open>
          <summary><span class="acc-title">Blood Cleanse</span><span class="acc-tag">blood</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> support the body’s internal cleansing pathways and circulation flow.</p>
            <ul>
              <li>Traditional blood/skin/lymph supports (e.g., burdock, red clover themes)</li>
              <li>Gentle bitters or mineral support depending on constitution</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Parasites</span><span class="acc-tag">cleansing</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> support internal terrain while encouraging healthy elimination.</p>
            <ul>
              <li>Bitter + aromatic themes (often paired with bowel rhythm support)</li>
              <li>Focus on consistency and hydration</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Bile - Constipation</span><span class="acc-tag">elimination</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> support bile flow and bowel rhythm so waste can move out daily.</p>
            <ul>
              <li>Bitters + motility themes (ginger, fennel-style support)</li>
              <li>Gentle bowel toners (avoid harsh dependency patterns)</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Nauseated / Nausea</span><span class="acc-tag">stomach</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> calm the stomach and settle the nervous system.</p>
            <ul>
              <li>Aromatic comfort themes (peppermint/ginger-style support)</li>
              <li>Soothing mucosa support when irritation is present</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Blood</span><span class="acc-tag">circulation</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> circulation support + nourishment (often mineral-focused).</p>
            <ul>
              <li>Mineral-rich themes (nettle-style nourishment)</li>
              <li>Circulation support depending on needs</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Lymph</span><span class="acc-tag">movement</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> support lymph movement through hydration, herbs, and gentle motion.</p>
            <ul>
              <li>Cleavers/red clover-style themes</li>
              <li>Pair with walking, breathwork, and water</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Mucus</span><span class="acc-tag">respiratory</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> reduce congestion and support clean drainage.</p>
            <ul>
              <li>Warming aromatic themes</li>
              <li>Hydration + avoiding mucus-forming foods for a season</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Kidneys</span><span class="acc-tag">water</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> gentle water-balance support and mineral repletion.</p>
            <ul>
              <li>Nettle/corn silk-style themes</li>
              <li>Hydration rhythm and electrolyte balance</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Liver</span><span class="acc-tag">bile</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> bitters + bile flow + fat digestion support.</p>
            <ul>
              <li>Bitters + root themes</li>
              <li>Often paired with bowel rhythm support</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Calcification / Fibroid Cleanse</span><span class="acc-tag">clearing</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> support tissue clearing pathways and circulation.</p>
            <ul>
              <li>Traditional circulation + lymph + uterine support themes</li>
              <li>Best paired with diet structure and professional guidance</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc-title">Adrenal & Nervous System</span><span class="acc-tag">calm</span></summary>
          <div class="acc-body">
            <p><strong>Intention:</strong> calm stress signals that disrupt digestion, sleep, and hormones.</p>
            <ul>
              <li>Adaptogen themes + mineral support</li>
              <li>Evening focus for restoration</li>
            </ul>
          </div>
        </details>

        <details class="acc-item">
          <summary><span class="acc
          :root{
  --bg:#0b0f14;
  --panel:#111825;
  --panel2:#0f1520;
  --text:#eaf0ff;
  --muted:#b8c2d9;
  --line:#1c2740;
  --accent:#7aa7ff;
  --accent2:#7affc8;
  --shadow: 0 12px 28px rgba(0,0,0,.35);
  --radius: 18px;
  --radius2: 14px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(1200px 800px at 20% 0%, rgba(122,167,255,.18), transparent 55%),
              radial-gradient(900px 600px at 80% 10%, rgba(122,255,200,.12), transparent 50%),
              var(--bg);
  color: var(--text);
}

a{ color: var(--accent); text-decoration: none; }
a:hover{ text-decoration: underline; }

.container{
  width:min(1040px, 92vw);
  margin:0 auto;
  padding: 22px 0;
}

.site-header{
  position: sticky;
  top:0;
  z-index:10;
  background: rgba(11,15,20,.72);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(28,39,64,.7);
}

.header-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:14px;
  padding: 14px 0;
}

.brand{
  display:flex;
  flex-direction:column;
  gap:2px;
  color: var(--text);
  text-decoration:none;
}
.brand-mark{
  font-weight: 860;
  letter-spacing: .2px;
  line-height: 1;
}
.brand-sub{
  color: rgba(184,194,217,.92);
  font-weight: 650;
  font-size: .92rem;
  line-height: 1;
}

.nav{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
}
.nav a{
  padding: 9px 12px;
  border: 1px solid rgba(28,39,64,.8);
  border-radius: 999px;
  color: var(--muted);
  background: rgba(17,24,37,.35);
}
.nav a.active{
  color: var(--text);
  border-color: rgba(122,167,255,.55);
  background: rgba(122,167,255,.12);
}

.hero{
  padding: 24px;
  border: 1px solid rgba(28,39,64,.85);
  border-radius: var(--radius);
  background: linear-gradient(180deg, rgba(17,24,37,.75), rgba(15,21,32,.55));
  box-shadow: var(--shadow);
}
.hero.compact{ padding: 18px 20px; }
.hero h1{
  margin: 0 0 8px 0;
  font-size: clamp(28px, 4vw, 44px);
}
.lead{
  margin: 0;
  color: var(--muted);
  font-size: 1.05rem;
  line-height: 1.55;
  max-width: 78ch;
}

.hero-top{
  display:flex;
  gap: 14px;
  align-items:flex-start;
  justify-content:space-between;
  flex-wrap: wrap;
}

.verse-card{
  min-width: 210px;
  border: 1px solid rgba(122,255,200,.35);
  background: rgba(122,255,200,.08);
  border-radius: 16px;
  padding: 12px 12px;
}
.verse-label{
  color: rgba(184,194,217,.92);
  font-size: .86rem;
  font-weight: 700;
}
.verse-text{
  font-size: 1.25rem;
  font-weight: 900;
  margin-top: 2px;
}
.verse-sub{
  color: rgba(184,194,217,.9);
  margin-top: 4px;
  font-size: .92rem;
}

.pill-row{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 16px;
}
.pill{
  border:1px solid rgba(122,167,255,.45);
  background: rgba(122,167,255,.12);
  color: var(--text);
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 700;
  font-size: .95rem;
}

.grid{
  display:grid;
  gap: 16px;
  margin-top: 16px;
}
.grid.two{ grid-template-columns: repeat(2, minmax(0,1fr)); }
@media (max-width: 860px){
  .grid.two{ grid-template-columns: 1fr; }
}

.card{
  border: 1px solid rgba(28,39,64,.85);
  border-radius: var(--radius);
  background: rgba(17,24,37,.55);
  padding: 18px 18px;
  box-shadow: var(--shadow);
}
.card h2{ margin: 0 0 10px 0; font-size: 1.35rem; }
.card h3{ margin: 0 0 6px 0; font-size: 1.1rem; }
.card p{ color: var(--muted); line-height: 1.6; }
.card ul{ margin: 10px 0 0; color: var(--muted); line-height: 1.6; }
.card li{ margin: 6px 0; }

.callout{
  margin-top: 12px;
  border-left: 4px solid rgba(122,255,200,.7);
  padding: 10px 12px;
  background: rgba(122,255,200,.08);
  border-radius: 10px;
}
.callout.subtle{
  border-left-color: rgba(122,167,255,.75);
  background: rgba(122,167,255,.08);
}

.note{ color: var(--muted); margin-top: 12px; }
.fineprint{
  color: rgba(184,194,217,.9);
  font-size: .92rem;
  line-height: 1.6;
}

.flow{
  display:grid;
  gap: 10px;
  margin-top: 12px;
}
.flow-step{
  padding: 12px 12px;
  background: rgba(15,21,32,.6);
  border: 1px solid rgba(28,39,64,.85);
  border-radius: var(--radius2);
}
.flow-arrow{
  text-align:center;
  color: rgba(122,167,255,.9);
  font-weight: 900;
  letter-spacing: 1px;
}

.search-row{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  margin-top: 14px;
}
.search{
  flex: 1 1 260px;
  padding: 12px 12px;
  border-radius: 12px;
  border: 1px solid rgba(28,39,64,.85);
  outline: none;
  background: rgba(15,21,32,.6);
  color: var(--text);
}
.search::placeholder{ color: rgba(184,194,217,.75); }

.btn{
  padding: 11px 12px;
  border-radius: 12px;
  border: 1px solid rgba(122,167,255,.55);
  background: rgba(122,167,255,.14);
  color: var(--text);
  cursor: pointer;
  font-weight: 750;
}
.btn:hover{ filter: brightness(1.07); }
.btn.btn-ghost{
  border-color: rgba(28,39,64,.85);
  background: rgba(17,24,37,.45);
  color: var(--muted);
}

.accordion{ margin-top: 10px; display:grid; gap: 10px; }
.acc-item{
  border: 1px solid rgba(28,39,64,.85);
  border-radius: var(--radius2);
  background: rgba(15,21,32,.5);
  overflow: hidden;
}
.acc-item summary{
  list-style:none;
  cursor:pointer;
  padding: 12px 12px;
  display:flex;
  justify-content:space-between;
  gap: 10px;
  align-items:center;
}
.acc-item summary::-webkit-details-marker{ display:none; }
.acc-title{ font-weight: 850; }
.acc-tag{
  font-size: .85rem;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(122,255,200,.45);
  background: rgba(122,255,200,.10);
  color: var(--text);
  flex: 0 0 auto;
}
.acc-body{
  padding: 0 12px 12px 12px;
  border-top: 1px solid rgba(28,39,64,.75);
}
.acc-body p, .acc-body li{ color: var(--muted); }

/* Protocol Builder */
.protocol-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  margin-top: 12px;
}
@media (max-width: 980px){
  .protocol-grid{ grid-template-columns: 1fr; }
}
.protocol-col{
  border: 1px solid rgba(28,39,64,.85);
  background: rgba(15,21,32,.55);
  border-radius: 16px;
  padding: 12px;
}
.protocol-label{
  font-weight: 900;
  margin-bottom: 8px;
}
.select{
  width:100%;
  padding: 12px 12px;
  border-radius: 12px;
  border: 1px solid rgba(28,39,64,.85);
  background: rgba(11,15,20,.55);
  color: var(--text);
  outline: none;
}
.protocol-out{
  margin-top: 10px;
  color: var(--muted);
  line-height: 1.6;
  font-size: .95rem;
}
.protocol-actions{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 12px;
}
.protocol-result{
  margin-top: 12px;
  border: 1px solid rgba(122,255,200,.35);
  background: rgba(122,255,200,.07);
  border-radius: 16px;
  padding: 12px;
  color: rgba(234,240,255,.95);
  display:none;
}
.protocol-result h3{
  margin: 0 0 8px 0;
}
.protocol-block{
  border: 1px solid rgba(28,39,64,.85);
  background: rgba(15,21,32,.45);
  border-radius: 14px;
  padding: 10px;
  margin-top: 10px;
}
.protocol-block .small{
  color: rgba(184,194,217,.9);
  font-size: .9rem;
}

.site-footer{
  border-top: 1px solid rgba(28,39,64,.7);
  margin-top: 22px;
  background: rgba(11,15,20,.35);
}
.footer-inner{
  display:flex;
  justify-content:space-between;
  gap: 12px;
  flex-wrap: wrap;
  padding: 14px 0;
  color: rgba(184,194,217,.85);
}
function getAllDetails() {
  return Array.from(document.querySelectorAll("details.acc-item"));
}

function setAll(open) {
  getAllDetails().forEach(d => (d.open = open));
}

function matchesSearch(detailsEl, query) {
  if (!query) return true;
  const text = detailsEl.innerText.toLowerCase();
  return text.includes(query.toLowerCase());
}

function applySearch(query) {
  const items = getAllDetails();
  let anyFound = false;

  items.forEach(item => {
    const show = matchesSearch(item, query);
    item.style.display = show ? "" : "none";
    if (show) anyFound = true;
  });

  if (query) {
    items.forEach(item => {
      if (item.style.display !== "none") item.open = true;
    });
  }
}

const TEA_LIBRARY = {
  blood_cleanse: {
    title: "Blood Cleanse Tea",
    blend: ["Burdock root", "Red clover", "Nettle leaf", "Orange peel (light)"],
    how: "1 cup in the morning, 5–6 days/week. Hydrate well."
  },
  parasites: {
    title: "Parasites Support Tea",
    blend: ["Wormwood (very small amount)*", "Clove*", "Black walnut hull* (if used)", "Ginger or peppermint"],
    how: "Short cycles are common. Pair with bowel rhythm support and professional guidance.",
    note: "*These herbs can be strong and are not appropriate for everyone. Consult a qualified professional."
  },
  bile_constipation: {
    title: "Bile + Constipation Support Tea",
    blend: ["Dandelion root (bitter)", "Ginger", "Fennel seed", "Chamomile (comfort)"],
    how: "1 cup 15–30 minutes before dinner OR early evening. Support daily elimination with hydration."
  },
  liver_bile: {
    title: "Liver/Bile Flow Tea",
    blend: ["Dandelion root", "Burdock root", "Gentle bitters (micro-dose)", "Chamomile"],
    how: "1 cup 15–30 minutes before meals, especially breakfast/lunch."
  },
  kidneys: {
    title: "Kidneys & Water Balance Tea",
    blend: ["Nettle leaf", "Corn silk", "Lemon peel", "Parsley leaf (optional)"],
    how: "1–2 cups earlier in the day. Maintain steady water intake."
  },
  lymph: {
    title: "Lymph & Circulation Tea",
    blend: ["Cleavers", "Red clover", "Hawthorn berry (optional)", "Ginger (light)"],
    how: "1 cup midday. Pair with walking, deep breathing, and hydration."
  },
  mucus: {
    title: "Mucus Break-Up Tea",
    blend: ["Ginger", "Thyme or oregano (light)", "Mullein leaf (optional)", "Lemon peel"],
    how: "1 cup morning or noon. Avoid late-night if it stimulates."
  },
  mucosa: {
    title: "Soothing Mucosa Tea",
    blend: ["Marshmallow root", "Chamomile", "Licorice (DGL preferred if needed)", "Ginger (tiny)"],
    how: "1 cup in the evening. Sip slowly."
  },
  endocrine: {
    title: "Endocrine/Hormone Balance Tea",
    blend: ["Holy basil (tulsi)", "Nettle leaf", "Cinnamon (light)", "Spearmint (optional)"],
    how: "1 cup morning or noon. Consistency matters more than intensity."
  },
  adrenal: {
    title: "Adrenal & Nervous System Tea",
    blend: ["Tulsi (holy basil)", "Lemon balm", "Chamomile", "Lavender (tiny)"],
    how: "1 cup in the evening or late afternoon to support calm and restoration."
  },
  digestion: {
    title: "Digestion & Absorption Tea",
    blend: ["Ginger", "Fennel seed", "Peppermint", "Orange peel"],
    how: "1 cup 10–20 minutes after meals OR between meals if bloating is present."
  },
  nausea: {
    title: "Nausea/Calm Stomach Tea",
    blend: ["Ginger", "Peppermint (or lemon balm)", "Chamomile", "Fennel seed"],
    how: "Sip slowly as needed. If persistent nausea is present, seek medical guidance."
  },
  uterine: {
    title: "Uterine Tone / Blood Cleanse Tea",
    blend: ["Red raspberry leaf", "Nettle leaf", "Red clover", "Ginger (light)"],
    how: "Often used in cycle-aware rhythms. Best tailored with consultation."
  }
};

function renderTea(key) {
  const item = TEA_LIBRARY[key];
  if (!item) return "<div class='small'>Select an option to see a blend.</div>";

  const blendList = item.blend.map(x => `<li>${x}</li>`).join("");
  const note = item.note ? `<p class="small"><strong>Note:</strong> ${item.note}</p>` : "";

  return `
    <div><strong>${item.title}</strong></div>
    <div class="small"><strong>Blend:</strong></div>
    <ul>${blendList}</ul>
    <div class="small"><strong>Format:</strong> ${item.how}</div>
    ${note}
  `;
}

function buildProtocol() {
  const m = document.getElementById("selMorning")?.value;
  const n = document.getElementById("selNoon")?.value;
  const e = document.getElementById("selEvening")?.value;

  const box = document.getElementById("protocolResult");
  if (!box) return;

  const morning = TEA_LIBRARY[m];
  const noon = TEA_LIBRARY[n];
  const evening = TEA_LIBRARY[e];

  const protocolHtml = `
    <h3>Your Daily Tea Protocol</h3>

    <div class="protocol-block">
      <div><strong>Morning Tea:</strong> ${morning?.title || ""}</div>
      <div class="small">${morning?.how || ""}</div>
    </div>

    <div class="protocol-block">
      <div><strong>Noontime Tea:</strong> ${noon?.title || ""}</div>
      <div class="small">${noon?.how || ""}</div>
    </div>

    <div class="protocol-block">
      <div><strong>Evening Tea:</strong> ${evening?.title || ""}</div>
      <div class="small">${evening?.how || ""}</div>
    </div>

    <div class="protocol-block">
      <div><strong>Notes:</strong></div>
      <div class="small">
        • Keep it simple for 7–14 days before stacking too many changes.<br/>
        • Hydration + elimination are non-negotiable when “detox” is the goal.<br/>
        • For advanced cleansing (parasites / fibroid focus), add diet consultation and blood panel review.
      </div>
    </div>
  `;

  box.innerHTML = protocolHtml;
  box.style.display = "block";
  box.scrollIntoView({ behavior: "smooth", block: "start" });
}

function resetProtocol() {
  const box = document.getElementById("protocolResult");
  if (box) {
    box.style.display = "none";
    box.innerHTML = "";
  }
}

document.addEventListener("DOMContentLoaded", () => {
  // Accordion controls
  const search = document.getElementById("search");
  const expandAll = document.getElementById("expandAll");
  const collapseAll = document.getElementById("collapseAll");

  if (expandAll) expandAll.addEventListener("click", () => setAll(true));
  if (collapseAll) collapseAll.addEventListener("click", () => setAll(false));
  if (search) search.addEventListener("input", (e) => applySearch(e.target.value.trim()));

  // Protocol Builder live previews
  const selMorning = document.getElementById("selMorning");
  const selNoon = document.getElementById("selNoon");
  const selEvening = document.getElementById("selEvening");

  const outMorning = document.getElementById("outMorning");
  const outNoon = document.getElementById("outNoon");
  const outEvening = document.getElementById("outEvening");

  function refreshPreviews() {
    if (selMorning && outMorning) outMorning.innerHTML = renderTea(selMorning.value);
    if (selNoon && outNoon) outNoon.innerHTML = renderTea(selNoon.value);
    if (selEvening && outEvening) outEvening.innerHTML = renderTea(selEvening.value);
  }

  if (selMorning) selMorning.addEventListener("change", refreshPreviews);
  if (selNoon) selNoon.addEventListener("change", refreshPreviews);
  if (selEvening) selEvening.addEventListener("change", refreshPreviews);

  refreshPreviews();

  // Build/Reset buttons
  const btnBuild = document.getElementById("btnBuild");
  const btnReset = document.getElementById("btnReset");
  if (btnBuild) btnBuild.addEventListener("click", buildProtocol);
  if (btnReset) btnReset.addEventListener("click", () => {
    resetProtocol();
    if (search) { search.value = ""; applySearch(""); }
  });
});
